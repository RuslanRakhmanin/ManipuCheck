<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ManipuCheck</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <header class="popup-header">
      <div class="logo">
        <img src="../assets/icon32.png" alt="ManipuCheck" class="logo-icon">
        <h1>ManipuCheck</h1>
      </div>
      <button id="settingsBtn" class="icon-button" title="Settings">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 10v6m11-7h-6m-10 0H1m15.5-3.5L19 8.5m-14 7L7.5 13M16.5 4.5L19 7m-14 7l2.5 2.5"></path>
        </svg>
      </button>
    </header>

    <main class="popup-main">
      <!-- Status Section -->
      <div class="status-section">
        <div id="statusIndicator" class="status-indicator idle">
          <div class="status-dot"></div>
          <span id="statusText">Ready to analyze</span>
        </div>
        
        <div id="progressBar" class="progress-bar hidden">
          <div class="progress-fill"></div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-section">
        <button id="analyzePageBtn" class="primary-button">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14,2 14,8 20,8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <polyline points="10,9 9,9 8,9"></polyline>
          </svg>
          Analyze Page
        </button>
        
        <button id="analyzeSelectionBtn" class="secondary-button">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12l2 2 4-4"></path>
            <path d="M21 12c.552 0 1-.448 1-1V8c0-.552-.448-1-1-1h-3V4c0-.552-.448-1-1-1h-3c-.552 0-1 .448-1 1v3H8c-.552 0-1 .448-1 1v3c0 .552.448 1 1 1h3v5c0 .552.448 1 1 1h3c.552 0 1-.448 1-1v-3h3z"></path>
          </svg>
          Analyze Selection
        </button>
        
        <button id="clearHighlightsBtn" class="tertiary-button">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          Clear Highlights
        </button>
      </div>

      <!-- Results Section -->
      <div id="resultsSection" class="results-section hidden">
        <div class="results-header">
          <h3>Analysis Results</h3>
          <span id="analysisDate" class="analysis-date"></span>
        </div>
        
        <div id="summaryStats" class="summary-stats">
          <div class="stat-item">
            <span class="stat-number" id="totalCount">0</span>
            <span class="stat-label">Issues Found</span>
          </div>
        </div>

        <div id="categoryBreakdown" class="category-breakdown">
          <!-- Categories will be populated by JavaScript -->
        </div>

        <div class="results-actions">
          <button id="exportBtn" class="secondary-button small">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7,10 12,15 17,10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Export
          </button>
        </div>
      </div>

      <!-- Error Section -->
      <div id="errorSection" class="error-section hidden">
        <div class="error-content">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="15" y1="9" x2="9" y2="15"></line>
            <line x1="9" y1="9" x2="15" y2="15"></line>
          </svg>
          <div>
            <h4>Analysis Failed</h4>
            <p id="errorMessage">An error occurred during analysis.</p>
          </div>
        </div>
        <button id="retryBtn" class="secondary-button small">Retry</button>
      </div>

      <!-- Settings Quick Access -->
      <div class="quick-settings">
        <div class="setting-item">
          <label for="highlightMode">Highlight Mode:</label>
          <select id="highlightMode">
            <option value="full-color">Full Color</option>
            <option value="low-contrast">Low Contrast</option>
          </select>
        </div>
        
        <div class="setting-item">
          <label for="autoAnalyze">
            <input type="checkbox" id="autoAnalyze">
            Auto-analyze pages
          </label>
        </div>
      </div>
    </main>

    <footer class="popup-footer">
      <div class="footer-links">
        <button id="optionsBtn" class="link-button">Options</button>
        <button id="helpBtn" class="link-button">Help</button>
        <button id="aboutBtn" class="link-button">About</button>
      </div>
    </footer>
  </div>

</body>
</html>